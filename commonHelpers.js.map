{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page) {\n  const searchParams = new URLSearchParams({\n    key: '45176970-913b8fa7a45cf3c015efbbbdd',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  });\n\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  try {\n    const response = await axios(url);\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.getElementById('gallery');\n\nexport function renderImages(images) {\n  let markup = '';\n  \n  markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"card\">\n        <a class=\"list\" href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\">\n        </a>\n        <ul class=\"info-list\">\n            <li>\n                <p class=\"info-title\">Likes</p>\n                <p class=\"info-data\">${likes}</p>\n            </li>\n            <li>\n                <p class=\"info-title\">Views</p>\n                <p class=\"info-data\">${views}</p>\n            </li>\n            <li>\n                <p class=\"info-title\">Comments</p>\n                <p class=\"info-data\">${comments}</p>\n            </li>\n            <li>\n                <p class=\"info-title\">Downloads</p>\n                <p class=\"info-data\">${downloads}</p>\n            </li>\n          </ul>\n      </li>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  \n  lightbox.refresh();\n}\n\nexport function clearImages() {\nconst galleryList = document.getElementById('gallery');\ngalleryList.innerHTML = \"\";\n}\n\nexport function showErrorMessage(message) {\n  iziToast.error({\n    message: message,\n    position: 'bottomCenter',\n  });\n}\n\nexport function showWarningMessage(message) {\n  iziToast.warning({\n    message: message,\n    position: 'bottomCenter',\n  });\n}\n\nexport function showInfoMessage(message) {\n  iziToast.info({\n    message: message,\n    position: 'bottomCenter',\n  });\n}","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  showErrorMessage,\n  showWarningMessage,\nshowInfoMessage,\n\n} from './js/render-functions.js';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst pendingIcon = document.getElementById('pending-icon');\n\n\nlet currentPage = 1;\nlet currentQuery = '';\n\n// \n\n\nsearchForm.addEventListener('submit', async event => {\nevent.preventDefault();\n    \n\nconst query = searchInput.value.trim();\n\nif (query === '') {\nshowWarningMessage('Please enter a search query');\nreturn;\n}\n\ncurrentQuery = query;\ncurrentPage = 1;\n\n\ntry {\npendingIcon.style.display = 'block';\n\nconst data = await fetchImages(currentQuery, currentPage);\n\nif (data.hits.length === 0 || currentQuery === \"\") {\ngallery.innerHTML = '';\nshowErrorMessage(\n'Sorry, there are no images matching your search query. Please try again!'\n);\nloadMoreBtn.style.display = 'none';\n        \nreturn;\n} else {\ngallery.innerHTML = '';\nrenderImages(data.hits);\nif (data.totalHits > currentPage * 15) {\nloadMoreBtn.style.display = 'block';\n} else {\nloadMoreBtn.style.display = 'none';\n}\n}\n} catch (error) {\nshowErrorMessage('Failed to fetch images. Please try again later.');\n} finally {\npendingIcon.style.display = 'none';\n}\n});\n\nloadMoreBtn.addEventListener('click', async () => {\ncurrentPage++;\npendingIcon.style.display = 'block';\n\ntry {\nconst data = await fetchImages(currentQuery, currentPage);\npendingIcon.style.display = 'none';\nif (data.hits.length > 0) {\nrenderImages(data.hits);\nif (data.totalHits > currentPage * 15) {\nloadMoreBtn.style.display = 'block';\n} else {\nloadMoreBtn.style.display = 'none';\nshowInfoMessage(\n\"We're sorry, but you've reached the end of search results.\"\n);\n}\n\nconst cardHeight = document\n.querySelector('.card')\n.getBoundingClientRect().height;\n\nwindow.scrollBy({\ntop: cardHeight * 2,\nbehavior: 'smooth',\n});\n}\n} catch (error) {\nshowErrorMessage('Failed to load more images. Please try again later.');\n}\nfinally {\npendingIcon.style.display = 'none';\n}\n});\n\n"],"names":["fetchImages","query","page","url","axios","gallery","renderImages","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","SimpleLightbox","showErrorMessage","message","iziToast","showWarningMessage","showInfoMessage","searchForm","searchInput","loadMoreBtn","pendingIcon","currentPage","currentQuery","event","data","cardHeight"],"mappings":"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"}